var w=Object.defineProperty;var j=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var N=(i,t,s)=>t in i?w(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s,_=(i,t)=>{for(var s in t||(t={}))P.call(t,s)&&N(i,s,t[s]);if(j)for(var s of j(t))C.call(t,s)&&N(i,s,t[s]);return i};import{u as I,r,j as n}from"./main-165.js";import{_ as a,d as L,I as F,F as M,c}from"./bi.312.95.js";import{S as R}from"./bi.354.971.js";import T from"./bi.630.338.js";import{b as A,c as S}from"./bi.850.932.js";import{D as W}from"./bi.597.933.js";import"./bi.40.785.js";function U({formFields:i,setFlow:t,flow:s,allIntegURL:b}){const g=I(),[u,d]=r.useState(!1),[f,x]=r.useState({}),[o,h]=r.useState(1),[D,m]=r.useState({show:!1}),y=[{label:a("First Name","bit-integrations"),key:"name",required:!0},{label:a("Email Address","bit-integrations"),key:"email",required:!0},{label:a("Last Name","bit-integrations"),key:"last_name",required:!1},{label:a("Phone Number","bit-integrations"),key:"phone_number",required:!1},{label:a("Company","bit-integrations"),key:"company",required:!1},{label:a("Website","bit-integrations"),key:"website",required:!1},{label:a("GDPR","bit-integrations"),key:"gdpr",required:!1},{label:a("Event Registration page URL","bit-integrations"),key:"ref_url",required:!1}],[e,p]=r.useState({name:"Demio",type:"Demio",api_key:"",api_secret:"",field_map:A(y),actionName:"registerPeopletoWabinar",demioFields:y,actions:{}}),q=()=>{d(!0),M(s,t,b,e,g,"","",d).then(l=>{var k;l.success?(c.success((k=l.data)==null?void 0:k.msg),g(b)):c.error(l.data||l)})},E=v=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!S(e)){c.error(a("Please map mandatory fields","bit-integrations"));return}if(!e.selectedEvent){c.error(a("Please select a Event","bit-integrations"));return}e.field_map.length>0&&h(v)};return n.jsxs("div",{children:[n.jsx(L,{snack:D,setSnackbar:m}),n.jsx("div",{className:"txt-center mt-2",children:n.jsx(R,{step:3,active:o})}),n.jsx(T,{demioConf:e,setDemioConf:p,step:o,setStep:h,loading:f,setLoading:x,setSnackbar:m}),n.jsxs("div",{className:"btcd-stp-page",style:_({},o===2&&{width:900,height:"auto",overflow:"visible"}),children:[n.jsx(W,{formFields:i,demioConf:e,setDemioConf:p,loading:f,setLoading:x,isLoading:u,setIsLoading:d,setSnackbar:m}),(e==null?void 0:e.actionName)&&n.jsxs("button",{onClick:()=>E(3),disabled:!S(e),className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[a("Next","bit-integrations")," Â ",n.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(e==null?void 0:e.actionName)&&n.jsx(F,{step:o,saveConfig:()=>q(),isLoading:u,dataConf:e,setDataConf:p,formFields:i})]})}export{U as default};
