import{u as _,l as x,r as i,j as s}from"./main-165.js";import{_ as t,d as k,I as j,s as q}from"./bi.312.95.js";import{B as v}from"./bi.430.769.js";import{S as N}from"./bi.354.971.js";import S from"./bi.450.292.js";import{s as I,h as w,d as F,e as B}from"./bi.459.844.js";import{C as E}from"./bi.588.845.js";import"./bi.40.785.js";import"./bi.953.732.js";import"./bi.422.733.js";function H({formFields:c,setFlow:u,flow:p,allIntegURL:f}){const b=_(),{id:g}=x(),[l,d]=i.useState({auth:!1,list:!1,tag:!1,update:!1}),[n,m]=i.useState(1),[h,a]=i.useState({show:!1}),y=[{key:"email_address",label:t("Email","bit-integrations"),required:!0},{key:"first_name",label:t("First Name","bit-integrations"),required:!1},{key:"last_name",label:t("Last Name","bit-integrations"),required:!1},{key:"job_title",label:t("Job Title","bit-integrations"),required:!1},{key:"company_name",label:t("Company Name","bit-integrations"),required:!1},{key:"phone_number",label:t("Phone Number","bit-integrations"),required:!1},{key:"anniversary",label:t("Anniversary","bit-integrations"),required:!1},{key:"birthday_month",label:t("Birthday Month","bit-integrations"),required:!1},{key:"birthday_day",label:t("Birthday Day","bit-integrations"),required:!1}],[e,r]=i.useState({name:"ConstantContact",type:"ConstantContact",clientId:"",clientSecret:"",list_ids:"",lists:[],default:{constantContactFields:y},source_type:"",tag_ids:"",tags:[],field_map:[{formField:"",constantContactFormField:""}],address_type:"",address_field:[],phone_type:"",phone_field:[],actions:{}});i.useEffect(()=>{window.opener&&I("constantContact")},[]);const C=()=>{var o;if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),(o=e.actions)!=null&&o.address&&!F(e)){a({show:!0,msg:t("Please map address required fields to continue.","bit-integrations")});return}if(!B(e)){a({show:!0,msg:t("Please map fields to continue.","bit-integrations")});return}m(3)};return s.jsxs("div",{children:[s.jsx(k,{snack:h,setSnackbar:a}),s.jsx("div",{className:"txt-center mt-2",children:s.jsx(N,{step:3,active:n})}),s.jsx(S,{constantContactConf:e,setConstantContactConf:r,step:n,setstep:m,isLoading:l,setIsLoading:d,setSnackbar:a}),s.jsxs("div",{className:"btcd-stp-page",style:{width:n===2&&900,height:n===2&&"auto"},children:[s.jsx(E,{id:g,formFields:c,handleInput:o=>w(o,e,r),constantContactConf:e,setConstantContactConf:r,isLoading:l,setIsLoading:d,setSnackbar:a}),s.jsxs("button",{onClick:()=>C(),disabled:(e==null?void 0:e.source_type)===""||e.field_map.length<1,className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[t("Next","bit-integrations"),s.jsx(v,{className:"ml-1 rev-icn"})]})]}),s.jsx(j,{step:n,saveConfig:()=>q({flow:p,setFlow:u,allIntegURL:f,navigate:b,conf:e,setIsLoading:d,setSnackbar:a}),isLoading:l===!0,dataConf:e,setDataConf:r,formFields:c})]})}export{H as default};
