var z=Object.defineProperty;var I=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var S=(o,s,n)=>s in o?z(o,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[s]=n,j=(o,s)=>{for(var n in s||(s={}))M.call(s,n)&&S(o,n,s[n]);if(I)for(var n of I(s))G.call(s,n)&&S(o,n,s[n]);return o};import{r as u,j as i,u as D,l as E}from"./main-165.js";import{_ as t,L as R,p as H,b as O,z as W,d as J,I as K,s as Q}from"./bi.312.95.js";import{S as U}from"./bi.354.971.js";import{B as V,h as X,c as Y}from"./bi.63.831.js";import{B as Z}from"./bi.430.769.js";import{T as P,t as $}from"./bi.40.785.js";import"./bi.953.732.js";import"./bi.422.733.js";function tt({formID:o,buddyBossConf:s,setBuddyBossConf:n,step:b,setStep:h,isLoading:g,setIsLoading:m,setSnackbar:k}){const[r,p]=u.useState(!1),[d,f]=u.useState(!1),{buddyBoss:a}=$,c=()=>{m("auth"),O({},"buddyBoss_authorize").then(l=>{l!=null&&l.success&&(p(!0),k({show:!0,msg:t("Connected with BuddyBoss Successfully","bit-integrations")})),m(!1),f(!0)})},x=l=>{const y=W(s);y[l.target.name]=l.target.value,n(y)};return i.jsxs("div",{className:"btcd-stp-page",style:{width:b===1&&900,height:b===1&&"auto"},children:[(a==null?void 0:a.youTubeLink)&&i.jsx(P,{title:"BuddyBoss",youTubeLink:a==null?void 0:a.youTubeLink}),(a==null?void 0:a.docLink)&&i.jsx(P,{title:"BuddyBoss",docLink:a==null?void 0:a.docLink}),i.jsx("div",{className:"mt-3",children:i.jsx("b",{children:t("Integration Name:","bit-integrations")})}),i.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:x,name:"name",value:s.name,type:"text",placeholder:t("Integration Name...","bit-integrations")}),g==="auth"&&i.jsxs("div",{className:"flx mt-5",children:[i.jsx(R,{size:25,clr:"#022217",className:"mr-2"}),"Checking if BuddyBoss is active!!!"]}),d&&!r&&!g&&i.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[i.jsx("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),H(t("%s plugin must be activated to integrate with Bit Integrations","bit-integrations"),"BuddyBoss")]}),!r&&i.jsx("button",{onClick:c,className:"btn btcd-btn-lg purple sh-sm flx mt-5",type:"button",children:t("Connect","bit-integrations")}),r&&i.jsxs("button",{onClick:()=>h(2),className:"btn btcd-btn-lg purple sh-sm flx mt-5",type:"button",disabled:!r,children:[t("Next","bit-integrations"),i.jsx(Z,{className:"ml-1 rev-icn"})]})]})}function dt({formFields:o,setFlow:s,flow:n,allIntegURL:b,isInfo:h,edit:g}){const m=D(),{formID:k}=E(),[r,p]=u.useState(!1),[d,f]=u.useState(1),[a,c]=u.useState({show:!1}),x=[{key:"1",label:t("Create Group Pro","bit-integrations")},{key:"2",label:t("Add the user to a group","bit-integrations")},{key:"3",label:t("End friendship with a user Pro","bit-integrations")},{key:"4",label:t("Follow a user Pro","bit-integrations")},{key:"5",label:t("Post a topic in a forum Pro","bit-integrations")},{key:"6",label:t("Remove user from a group Pro","bit-integrations")},{key:"7",label:t("Send a friendship request to a user Pro","bit-integrations")},{key:"8",label:t("Send a notification to all members of a group Pro","bit-integrations")},{key:"9",label:t("Send a private message to all members of a group Pro","bit-integrations")},{key:"10",label:t("Send a private message to a user Pro","bit-integrations")},{key:"11",label:t("Send a notification to a user Pro","bit-integrations")},{key:"12",label:t("Stop following a user Pro","bit-integrations")},{key:"13",label:t("Subscribe the user to a forum Pro","bit-integrations")},{key:"14",label:t("Add a post to the activity stream of a group Pro","bit-integrations")},{key:"15",label:t("Add a post to the site wide activity stream Pro","bit-integrations")},{key:"16",label:t("Add a post to the user's activity stream Pro","bit-integrations")},{key:"17",label:t("Post a reply to a topic in a forum","bit-integrations")},{key:"18",label:t("Set the user's status to a specific status","bit-integrations")}],l=[{key:"group_name",label:t("Group Name","bit-integrations"),required:!0}],y=[{key:"topic_content",label:t("Topic Content","bit-integrations"),required:!0},{key:"topic_title",label:t("Topic Title","bit-integrations"),required:!1}],_=[{key:"notification_content",label:t("Notification Content","bit-integrations"),required:!0},{key:"notification_link",label:t("Notification Link","bit-integrations"),required:!1}],N=[{key:"message_content",label:t("Message Content","bit-integrations"),required:!0},{key:"message_subject",label:t("Message subject","bit-integrations"),required:!1}],B=[{key:"activity_action",label:t("activity_action","bit-integrations"),required:!0},{key:"activity_content",label:t("activity_content","bit-integrations"),required:!0}],A=[{key:"activity_action",label:t("activity_action","bit-integrations"),required:!1},{key:"activity_action_link",label:t("activity_action_link","bit-integrations"),required:!1},{key:"activity_content",label:t("activity_content","bit-integrations"),required:!0}],w=[{key:"reply_content",label:t("Reply Content","bit-integrations"),required:!0}],C=[{key:"1",label:t("Public","bit-integrations")},{key:"2",label:t("Private","bit-integrations")},{key:"3",label:t("Hidden","bit-integrations")}],q=[{key:"1",label:t("Active","bit-integrations")},{key:"2",label:t("Suspend","bit-integrations")}],[e,v]=u.useState({name:"BuddyBoss",type:"BuddyBoss",mainAction:"",field_map:[{formField:"",buddyBossFormField:""}],allActions:x,groupPrivacyOptions:C,userStatusOptions:q,createGroupFields:l,topicInForumFields:y,sendAllUserNotificationFields:_,sendAllGroupPrivateMessageFields:N,addPostToGroupFields:B,addPostSiteWideActivityStreamFields:A,postReplyTopicForumFields:w,actions:{}}),F=()=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),["1","5","8","9","10","11","14","15","16","17"].includes(e.mainAction)&&!Y(e)){c({show:!0,msg:t("Please map fields to continue.","bit-integrations")});return}e.mainAction!==""&&f(3)};function T(){switch(e.mainAction){case"1":return e.privacyId===void 0;case"2":return e.groupId===void 0;case"3":return e.friendId===void 0;case"4":return e.friendId===void 0;case"5":return e.forumId===void 0;case"6":return e.groupId===void 0;case"7":return e.friendId===void 0;case"8":return e.groupId===void 0||e.friendId===void 0;case"9":return e.groupId===void 0||e.friendId===void 0;case"10":return e.friendId===void 0;case"12":return e.friendId===void 0;case"13":return e.forumId===void 0;case"14":return e.groupId===void 0||e.friendId===void 0;case"15":return e.friendId===void 0;case"16":return e.friendId===void 0;case"17":return e.topicId===void 0||e.forumId===void 0;case"18":return e.userStatusId===void 0;default:return!1}}return i.jsxs("div",{children:[i.jsx(J,{snack:a,setSnackbar:c}),i.jsx("div",{className:"txt-center mt-2",children:i.jsx(U,{step:3,active:d})}),i.jsx(tt,{formID:k,buddyBossConf:e,setBuddyBossConf:v,step:d,setStep:f,isLoading:r,setIsLoading:p,setSnackbar:c}),i.jsxs("div",{className:"btcd-stp-page",style:j({},d===2&&{width:900,height:"auto",overflow:"visible"}),children:[i.jsx(V,{formFields:o,handleInput:L=>X(L,e,v),buddyBossConf:e,setBuddyBossConf:v,isLoading:r,setIsLoading:p,setSnackbar:c,allIntegURL:b,isInfo:h,edit:g}),i.jsxs("button",{onClick:()=>F(),disabled:!e.mainAction||r||T(),className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[t("Next","bit-integrations")," ",i.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),i.jsx(K,{step:d,saveConfig:()=>Q({flow:n,setFlow:s,allIntegURL:b,navigate:m,conf:e,setIsLoading:p,setSnackbar:c}),isLoading:r,dataConf:e,setDataConf:v,formFields:o})]})}export{dt as default};
