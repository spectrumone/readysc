var S=Object.defineProperty;var O=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var A=(s,r,i)=>r in s?S(s,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[r]=i,L=(s,r)=>{for(var i in r||(r={}))v.call(r,i)&&A(s,i,r[i]);if(O)for(var i of O(r))C.call(r,i)&&A(s,i,r[i]);return s};import{r as p,j as t,u as I}from"./main-165.js";import{_ as o,L as R,d as D,I as w,F,c as a}from"./bi.312.95.js";import{S as M}from"./bi.354.971.js";import{j as Y,J,D as U,c as x,T as l}from"./bi.834.969.js";import{T as j,t as z}from"./bi.40.785.js";import"./bi.953.732.js";import"./bi.422.733.js";function X({jetEngineConf:s,setJetEngineConf:r,step:i,setStep:E,loading:T,setLoading:y,isInfo:m}){const[u,g]=p.useState(!1),[c,f]=p.useState({name:""}),{jetEngine:n}=z,b=()=>{setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),s!=null&&s.default,E(2)},e=d=>{const h=L({},s),P=L({},c);P[d.target.name]="",h[d.target.name]=d.target.value,f(P),r(h)};return t.jsxs("div",{className:"btcd-stp-page",style:{width:i===1&&900,height:i===1&&"auto"},children:[(n==null?void 0:n.youTubeLink)&&t.jsx(j,{title:"jet Engine",youTubeLink:n==null?void 0:n.youTubeLink}),(n==null?void 0:n.docLink)&&t.jsx(j,{title:"jet Engine",docLink:n==null?void 0:n.docLink}),t.jsx("div",{className:"mt-3",children:t.jsx("b",{children:o("Integration Name:","bit-integrations")})}),t.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:e,name:"name",value:s.name,type:"text",placeholder:o("Integration Name...","bit-integrations"),disabled:m}),c.name&&t.jsx("div",{style:{color:"red",fontSize:"15px"},children:c.name}),t.jsx("br",{}),!m&&t.jsxs("div",{children:[t.jsxs("button",{onClick:()=>Y(s,f,g,T,y),className:"btn btcd-btn-lg purple sh-sm flx",type:"button",disabled:u||T.auth,children:[u?o("Connected ✔","bit-integrations"):o("Connect to JetEngine","bit-integrations"),T.auth&&t.jsx(R,{size:"20",clr:"#022217",className:"ml-2"})]}),t.jsx("br",{}),t.jsxs("button",{onClick:b,className:"btn ml-auto btcd-btn-lg purple sh-sm flx",type:"button",disabled:!u,children:[o("Next","bit-integrations"),t.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]})]})}function Z({formFields:s,setFlow:r,flow:i,allIntegURL:E}){const T=I(),[y,m]=p.useState(!1),[u,g]=p.useState({auth:!1,cptOptions:!1,relationTypes:!1,cptList:!1,cctList:!1,taxList:!1,relationList:!1}),[c,f]=p.useState(1),[n,b]=p.useState({show:!1}),[e,d]=p.useState({name:"JetEngine",type:"JetEngine",field_map:[],staticFields:[],selectedTask:"",actions:{},deleteVendorFieldMap:!1,selectedMenuPosition:"",selectedMenuIcon:"",selectedSupports:"",selectedTaxPostTypes:"",allRelationTypes:[],relOptions:{parentObject:"",childObject:"",selectedRelationType:"",selectedRelationForEdit:""},cptList:[],selectedCPT:"",cctList:[],selectedCCT:"",taxList:[],selectedTaxForEdit:"",relationList:[],deleteFieldMap:{deletePostType:!1,deleteContentType:!1,deleteTaxonomy:!1,deleteRelation:!1}}),h=()=>{m(!0),F(i,r,E,e,T,"","",m).then(k=>{var _;k.success?(a.success((_=k.data)==null?void 0:_.msg),T(E)):a.error(k.data||k)})},P=N=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!e.selectedTask){a.error(o("Please select a task!","bit-integrations"));return}if(!U.includes(e.selectedTask)&&!x(e)){a.error(o("Please map mandatory fields!","bit-integrations"));return}if((e.selectedTask===l.CREATE_TAXONOMY||e.selectedTask===l.UPDATE_TAXONOMY)&&!e.selectedTaxPostTypes){a.error(o("Please select post type(s)!","bit-integrations"));return}if(e.selectedTask===l.CREATE_RELATION||e.selectedTask===l.UPDATE_RELATION){if(!e.relOptions.parentObject){a.error(o("Please select a parent object!","bit-integrations"));return}if(!e.relOptions.childObject){a.error(o("Please select a child object!","bit-integrations"));return}if(!e.relOptions.selectedRelationType){a.error(o("Please select a relation type!","bit-integrations"));return}}if(e.selectedTask===l.UPDATE_POST_TYPE&&!e.selectedCPT){a.error("Please select a custom post type!");return}if(e.selectedTask===l.UPDATE_CONTENT_TYPE&&!e.selectedCCT){a.error("Please select a custom content type!");return}if(e.selectedTask===l.UPDATE_TAXONOMY&&!e.selectedTaxForEdit){a.error("Please select a taxonomy!");return}if(e.selectedTask===l.UPDATE_RELATION&&!e.relOptions.selectedRelationForEdit){a.error("Please select a relation!");return}if(e.selectedTask===l.DELETE_POST_TYPE&&!e.selectedCPT&&!x(e)){a.error("Please select a custom post type or map fields!");return}if(e.selectedTask===l.DELETE_CONTENT_TYPE&&!e.selectedCCT&&!x(e)){a.error("Please select a custom content type or map fields!");return}if(e.selectedTask===l.DELETE_TAXONOMY&&!e.selectedTaxForEdit&&!x(e)){a.error("Please select a taxonomy or map fields!");return}if(e.selectedTask===l.DELETE_RELATION&&!e.relOptions.selectedRelationForEdit&&!x(e)){a.error("Please select a relation or map fields!");return}e.field_map.length>0&&f(N)};return t.jsxs("div",{children:[t.jsx(D,{snack:n,setSnackbar:b}),t.jsx("div",{className:"txt-center mt-2",children:t.jsx(M,{step:3,active:c})}),t.jsx(X,{jetEngineConf:e,setJetEngineConf:d,step:c,setStep:f,loading:u,setLoading:g,setSnackbar:b}),t.jsxs("div",{className:"btcd-stp-page",style:L({},c===2&&{width:900,height:"auto",overflow:"visible"}),children:[t.jsx(J,{formFields:s,jetEngineConf:e,setJetEngineConf:d,loading:u,setLoading:g,setSnackbar:b}),t.jsxs("button",{onClick:()=>P(3),disabled:!1,className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[o("Next","bit-integrations"),"  ",t.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),t.jsx(w,{step:c,saveConfig:()=>h(),isLoading:y,dataConf:e,setDataConf:d,formFields:s})]})}export{Z as default};
