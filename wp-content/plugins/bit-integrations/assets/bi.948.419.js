var M=Object.defineProperty;var j=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var v=(o,i,a)=>i in o?M(o,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[i]=a,N=(o,i)=>{for(var a in i||(i={}))R.call(i,a)&&v(o,a,i[a]);if(j)for(var a of j(i))T.call(i,a)&&v(o,a,i[a]);return o};import{r as u,j as t,u as z,l as _,i as F}from"./main-165.js";import{_ as e,L as B,p as E,b as G,z as P,j as q,d as U,I as H,s as O}from"./bi.312.95.js";import{S as $}from"./bi.354.971.js";import{L as J,h as K,c as Q}from"./bi.121.827.js";import{B as V}from"./bi.430.769.js";import{T as S,t as W}from"./bi.40.785.js";import"./bi.531.108.js";import"./bi.914.772.js";/* empty css          */import"./bi.953.732.js";import"./bi.422.733.js";function X({formID:o,learnDashConf:i,setLearnDashConf:a,step:b,setStep:k,isLoading:p,setIsLoading:d,setSnackbar:x}){const[l,y]=u.useState(!1),[c,m]=u.useState(!1),{learnDash:s}=W,h=()=>{d("auth"),G({},"learnDash_authorize").then(n=>{n!=null&&n.success&&(y(!0),x({show:!0,msg:e("Connected with LearnDash Successfully","bit-integrations")})),d(!1),m(!0)})},L=n=>{const g=P(i);g[n.target.name]=n.target.value,a(g)};return t.jsxs("div",{className:"btcd-stp-page",style:{width:b===1&&900,height:b===1&&"auto"},children:[(s==null?void 0:s.youTubeLink)&&t.jsx(S,{title:"LearnDash",youTubeLink:s==null?void 0:s.youTubeLink}),(s==null?void 0:s.docLink)&&t.jsx(S,{title:"LearnDash",docLink:s==null?void 0:s.docLink}),t.jsx("div",{className:"mt-3",children:t.jsx("b",{children:e("Integration Name:","bit-integrations")})}),t.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:L,name:"name",value:i.name,type:"text",placeholder:e("Integration Name...","bit-integrations")}),p==="auth"&&t.jsxs("div",{className:"flx mt-5",children:[t.jsx(B,{size:25,clr:"#022217",className:"mr-2"}),"Checking if LearnDash is active!!!"]}),c&&!l&&!p&&t.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[t.jsx("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),E(e("%s plugin must be activated to integrate with Bit Integrations","bit-integrations"),"LearnDash")]}),!l&&t.jsx("button",{onClick:h,className:"btn btcd-btn-lg purple sh-sm flx mt-5",type:"button",children:e("Connect","bit-integrations")}),l&&t.jsxs("button",{onClick:()=>k(2),className:"btn btcd-btn-lg purple sh-sm flx mt-5",type:"button",disabled:!l,children:[e("Next","bit-integrations"),t.jsx(V,{className:"ml-1 rev-icn"})]})]})}function ue({formFields:o,setFlow:i,flow:a,allIntegURL:b,isInfo:k,edit:p}){const d=z(),{formID:x}=_(),l=F(q),{siteURL:y}=l,[c,m]=u.useState(!1),[s,h]=u.useState(1),[L,n]=u.useState({show:!1}),g=[{key:"1",label:e("Create Group","bit-integrations")},{key:"2",label:e("Add the user to a group pro","bit-integrations")},{key:"3",label:e("Enroll the user in a course","bit-integrations")},{key:"4",label:e("Make the user the leader of group","bit-integrations")},{key:"5",label:e("Mark a course complete for the user","bit-integrations")},{key:"6",label:e("Mark a lesson complete for the user","bit-integrations")},{key:"7",label:e("Mark a lesson not complete for the user pro","bit-integrations")},{key:"8",label:e("Mark a topic complete for the user","bit-integrations")},{key:"9",label:e("Mark a topic not complete for the user pro","bit-integrations")},{key:"10",label:e("Remove the Leader from a group and its children pro","bit-integrations")},{key:"11",label:e("Remove the user from a group pro","bit-integrations")},{key:"12",label:e("Remove the user from a group and its children pro","bit-integrations")},{key:"13",label:e("Reset the users attempts for a quiz pro","bit-integrations")},{key:"14",label:e("Reset the users progress in a course pro","bit-integrations")},{key:"16",label:e("Send an email to the users group leaders","bit-integrations")},{key:"17",label:e("Unenroll the user from a course pro","bit-integrations")}],w=[{key:"1",label:e("Do not add group leader role","bit-integrations")},{key:"2",label:e("Add the role to their exiting role","bit-integrations")},{key:"3",label:e("Replace their existing role(s) with the Group Leader role","bit-integrations")}],A=[{key:"1",label:e("Do nothing","bit-integrations")},{key:"2",label:e("Add the role to their exiting role","bit-integrations")},{key:"3",label:e("Replace their existing role(s) with the Group Leader role","bit-integrations")}],C=[{key:"title",label:"Title",required:!0}],[r,f]=u.useState({name:"LearnDash",type:"LearnDash",mainAction:"",courseId:"",domainName:y,field_map:[{formField:"",learnDeshFormField:""}],allActions:g,groupUserRole:w,groupOfLeader4:A,createGroupFields:C,actions:{}}),I=()=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),r.mainAction==="1"&&!Q(r)){n({show:!0,msg:e("Please map fields to continue.","bit-integrations")});return}r.mainAction!==""&&h(3)};return t.jsxs("div",{children:[t.jsx(U,{snack:L,setSnackbar:n}),t.jsx("div",{className:"txt-center mt-2",children:t.jsx($,{step:3,active:s})}),t.jsx(X,{formID:x,learnDashConf:r,setLearnDashConf:f,step:s,setStep:h,isLoading:c,setIsLoading:m,setSnackbar:n}),t.jsxs("div",{className:"btcd-stp-page",style:N({},s===2&&{width:900,height:"auto",overflow:"visible"}),children:[t.jsx(J,{formFields:o,handleInput:D=>K(D,r,f),learnDashConf:r,setLearnDashConf:f,isLoading:c,setIsLoading:m,setSnackbar:n,allIntegURL:b,isInfo:k,edit:p}),r.mainAction!=="16"&&t.jsxs("button",{onClick:()=>I(),disabled:!r.mainAction||c,className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[e("Next","bit-integrations")," ",t.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),r.mainAction!=="16"&&t.jsx(H,{step:s,saveConfig:()=>O({flow:a,setFlow:i,allIntegURL:b,navigate:d,conf:r,setIsLoading:m,setSnackbar:n}),isLoading:c,dataConf:r,setDataConf:f,formFields:o})]})}export{ue as default};
