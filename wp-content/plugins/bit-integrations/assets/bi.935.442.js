var y=Object.defineProperty;var v=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var j=(a,s,e)=>s in a?y(a,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[s]=e,S=(a,s)=>{for(var e in s||(s={}))L.call(s,e)&&j(a,e,s[e]);if(v)for(var e of v(s))N.call(s,e)&&j(a,e,s[e]);return a};import{u as w,r as o,j as i}from"./main-165.js";import{d as C,_ as E,I as T,F as M,c as p}from"./bi.312.95.js";import{S as P}from"./bi.354.971.js";import z from"./bi.819.306.js";import{h as A,c as F}from"./bi.351.871.js";import{E as B}from"./bi.25.872.js";import"./bi.40.785.js";import"./bi.953.732.js";import"./bi.422.733.js";function X({formFields:a,setFlow:s,flow:e,allIntegURL:m}){const u=w(),[_,g]=o.useState(!1),[f,h]=o.useState({auth:!1,tags:!1,customFields:!1,lists:!1,emailOctopusFields:!1}),[n,x]=o.useState(1),[k,d]=o.useState({show:!1}),[t,c]=o.useState({name:"EmailOctopus",type:"EmailOctopus",auth_token:"",field_map:[{formField:"",emailOctopusFormField:""}],emailOctopusFields:[],lists:[],selectedList:"",status:"",tags:[],selectedTags:[],actions:{}}),I=()=>{g(!0),M(e,s,m,t,u,"","",g).then(r=>{var b;r.success?(p.success((b=r.data)==null?void 0:b.msg),u(m)):p.error(r.data||r)})},O=l=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!F(t)){p.error(E("Please map mandatory emailOctopusFields","bit-integrations"));return}t.field_map.length>0&&x(l)};return i.jsxs("div",{children:[i.jsx(C,{snack:k,setSnackbar:d}),i.jsx("div",{className:"txt-center mt-2",children:i.jsx(P,{step:3,active:n})}),i.jsx(z,{emailOctopusConf:t,setEmailOctopusConf:c,step:n,setStep:x,loading:f,setLoading:h,setSnackbar:d}),i.jsxs("div",{className:"btcd-stp-page",style:S({},n===2&&{width:900,height:"auto",overflow:"visible"}),children:[i.jsx(B,{formFields:a,handleInput:l=>A(l,t,c),emailOctopusConf:t,setEmailOctopusConf:c,loading:f,setLoading:h,setSnackbar:d}),(t==null?void 0:t.selectedList)&&i.jsxs("button",{onClick:()=>O(3),disabled:!F(t),className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[E("Next","bit-integrations")," Â ",i.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(t==null?void 0:t.selectedList)&&i.jsx(T,{step:n,saveConfig:()=>I(),isLoading:_,dataConf:t,setDataConf:c,formFields:a})]})}export{X as default};
