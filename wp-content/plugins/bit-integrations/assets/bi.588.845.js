var H=Object.defineProperty;var V=Object.getOwnPropertySymbols;var o=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var T=(i,s,r)=>s in i?H(i,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[s]=r,x=(i,s)=>{for(var r in s||(s={}))o.call(s,r)&&T(i,r,s[r]);if(V)for(var r of V(s))z.call(s,r)&&T(i,r,s[r]);return i};import{j as e,i as E,r as W,L as M}from"./main-165.js";import{_ as d,H as O,T as B,j as G,k as U,l as D,m as k,e as A,n}from"./bi.312.95.js";import{g as J,a as q,b as P}from"./bi.459.844.js";import{T as K}from"./bi.953.732.js";const R=(i,s,r,l,a)=>{const h=x({},s);a?l?h.relatedlists[a-1].upload_field_map.splice(i,0,{}):h.relatedlists[a-1].field_map.splice(i,0,{}):l?h.upload_field_map.splice(i,0,{}):h.field_map.splice(i,0,{}),r(x({},h))},Q=(i,s,r,l,a)=>{const h=x({},s);a?l?h.relatedlists[a-1].upload_field_map.length>1&&h.relatedlists[a-1].upload_field_map.splice(i,1):h.relatedlists[a-1].field_map.length>1&&h.relatedlists[a-1].field_map.splice(i,1):l?h.upload_field_map.length>1&&h.upload_field_map.splice(i,1):h.field_map.length>1&&h.field_map.splice(i,1),r(x({},h))},S=(i,s,r,l,a,h)=>{const b=x({},r);h?a?b.relatedlists[h-1].upload_field_map[s][i.target.name]=i.target.value:b.relatedlists[h-1].field_map[s][i.target.name]=i.target.value:a?b.upload_field_map[s][i.target.name]=i.target.value:b.field_map[s][i.target.name]=i.target.value,i.target.value==="custom"&&(h?b.relatedlists[h-1].field_map[s].customValue="":b.field_map[s].customValue=""),l(x({},b))},X=(i,s,r,l)=>{const a=x({},r);a.address_field[s].customValue=i.target.value,l(x({},a))},Y=(i,s,r,l)=>{const a=x({},r);a.phone_field[s].customValue=i.target.value,l(x({},a))},f=(i,s,r,l,a,h)=>{const b=x({},r);b.address_field[s][i.target.name]=i.target.value,l(x({},b))},$=(i,s,r,l)=>{const a=x({},r);a.phone_field[s][i.target.name]=i.target.value,l(x({},a))},I=(i,s,r)=>{const l=x({},s);l.phone_field||(l.address_field=[]),l.address_field.push({}),r(x({},l))},Z=(i,s,r)=>{const l=x({},s);l.address_field&&l.address_field.length>1&&l.address_field.splice(i,1),r(x({},l))},L=(i,s,r)=>{const l=x({},s);l.phone_field&&l.phone_field.length>1&&l.phone_field.splice(i,1),r(x({},l))};function C({i,formFields:s,field:r,constantContactConf:l,setConstantContactConf:a,addressField:h}){const b=r.required,_=h.filter(m=>!m.required);return e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsx("div",{className:"pos-rel flx",children:e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:r.formField||"",onChange:m=>f(m,i,l,a),children:[e.jsx("option",{value:"",children:d("Select Field","bit-integrations")}),s.map(m=>m.type!=="file"&&e.jsx("option",{value:m.name,children:m.label},`ff-zhcrm-${m.name}`)),e.jsx("option",{value:"custom",children:d("Custom...","bit-integrations")})]}),r.formField==="custom"&&e.jsx(O,{onChange:m=>X(m,i,l,a),label:d("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:r.customValue,placeholder:d("Custom Value","bit-integrations")}),e.jsxs("select",{className:"btcd-paper-inp",name:"constantContactAddressField",value:r.constantContactAddressField||"",onChange:m=>f(m,i,l,a),disabled:b,children:[e.jsx("option",{value:"",children:d("Select Field","bit-integrations")}),b?Object.values(h).map((m,g)=>e.jsx("option",{value:m.tag,children:m.name},`add-${g*2}`)):Object.values(_).map((m,g)=>e.jsx("option",{value:m.tag,children:m.name},`add-${g*2}`))]})]})}),!b&&e.jsxs(e.Fragment,{children:[(l==null?void 0:l.address_field.length)<5&&e.jsx("button",{onClick:()=>I(i,l,a),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>Z(i,l,a),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})}function ee({i,formFields:s,field:r,constantContactConf:l,setConstantContactConf:a,phoneField:h}){const b=r.required,_=h.filter(m=>!m.required);return e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsx("div",{className:"pos-rel flx",children:e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:r.formField||"",onChange:m=>$(m,i,l,a),children:[e.jsx("option",{value:"",children:d("Select Field","bit-integrations")}),s.map(m=>m.type!=="file"&&e.jsx("option",{value:m.name,children:m.label},`ff-zhcrm-${m.name}`)),e.jsx("option",{value:"custom",children:d("Custom...","bit-integrations")})]}),r.formField==="custom"&&e.jsx(O,{onChange:m=>Y(m,i,l,a),label:d("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:r.customValue,placeholder:d("Custom Value","bit-integrations")}),e.jsxs("select",{className:"btcd-paper-inp",name:"constantContactPhoneField",value:r.constantContactPhoneField||"",onChange:m=>$(m,i,l,a),disabled:b,children:[e.jsx("option",{value:"",children:d("Select Field","bit-integrations")}),b?Object.values(h).map((m,g)=>e.jsx("option",{value:m.tag,children:m.name},`add-${g*2}`)):Object.values(_).map((m,g)=>e.jsx("option",{value:m.tag,children:m.name},`add-${g*2}`))]})]})}),!b&&e.jsx("button",{onClick:()=>L(i,l,a),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx(B,{})})]})}function le({i,formFields:s,field:r,constantContactConf:l,setConstantContactConf:a}){var g,c,F,w;if(((g=l==null?void 0:l.field_map)==null?void 0:g.length)===1&&r.constantContactFormField===""){const u=x({},l),v=J(u);u.field_map=v,a(u)}const h=((c=l==null?void 0:l.default)==null?void 0:c.constantContactFields.filter(u=>u.required===!0))||[],b=((F=l==null?void 0:l.default)==null?void 0:F.constantContactFields.filter(u=>u.required===!1))||[],_=E(G),{isPro:m}=_;return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:r.formField||"",onChange:u=>S(u,i,l,a),children:[e.jsx("option",{value:"",children:d("Select Field","bit-integrations")}),e.jsx("optgroup",{label:d("Form Fields","bit-integrations"),children:s==null?void 0:s.map(u=>e.jsx("option",{value:u.name,children:u.label},`ff-rm-${u.name}`))}),e.jsx("option",{value:"custom",children:d("Custom...","bit-integrations")}),e.jsx("optgroup",{label:sprintf(d("General Smart Codes %s","bit-integrations"),m?"":`(${d("Pro","bit-integrations")})`),children:m&&((w=U)==null?void 0:w.map(u=>e.jsx("option",{value:u.name,children:u.label},`ff-rm-${u.name}`)))})]}),r.formField==="custom"&&e.jsx(K,{onChange:u=>D(u,i,l,a),label:d("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:r.customValue,placeholder:d("Custom Value","bit-integrations"),formFields:s}),e.jsxs("select",{className:"btcd-paper-inp",disabled:i<h.length,name:"constantContactFormField",value:i<h?h[i].label||"":r.constantContactFormField||"",onChange:u=>S(u,i,l,a),children:[e.jsx("option",{value:"",children:d("Select Field","bit-integrations")}),i<h.length?e.jsx("option",{value:h[i].key,children:h[i].label},h[i].key):b.map(({key:u,label:v})=>e.jsx("option",{value:u,children:v},u))]})]}),i>=h.length&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>R(i,l,a),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>Q(i,l,a),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function se({id:i,constantContactConf:s,setConstantContactConf:r,address:l,phone:a,isLoading:h,setIsLoading:b}){var v,N;const[_,m]=W.useState({show:!1,action:()=>{}}),g=(p,j)=>{const t=x({},s);j==="update"&&(p.target.checked?t.actions.update=!0:delete t.actions.update),j==="list_ids"&&(q(i,s,r,h,b),p.target.checked?t.actions.list=!0:delete t.actions.list,m({show:j})),j==="tag_ids"&&(P(i,s,r,h,b),p.target.checked?t.actions.tag=!0:delete t.actions.tag,m({show:j})),j==="address_type"&&(p.target.checked?(t.actions.address=!0,t.address_field=l.filter(y=>y.required).map(y=>({formField:"",constantContactAddressField:y.tag,required:!0}))):s.address_type===""&&(delete t.actions.address,t.address_field=""),m({show:j})),j==="phone_type"&&(p.target.checked?(t.actions.phone=!0,t.phone_field=a.filter(y=>y.required).map(y=>({formField:"",constantContactPhoneField:y.tag,required:!0}))):s.phone_type===""&&(delete t.actions.phone,t.phone_field=""),m({show:j})),r(x({},t))},c=()=>{m({show:!1})},F=(p,j)=>{const t=x({},s);j==="list_ids"&&p.length?(t.actions.list=!0,t.actions.update=!0):j==="list_ids"&&p.length<1&&delete t.actions.list,j==="address_type"&&p.length?t.actions.address=!0:j==="address_type"&&p.length<1&&(delete t.actions.address,t.address_field=[]),j==="phone_type"&&p.length?t.actions.phone=!0:j==="phone_type"&&p.length<1&&(delete t.actions.phone,t.phone_field=[]),t[j]=p,r(x({},t))},w=[{label:d("Home","bit-integrations"),value:"home"},{label:d("Work","bit-integrations"),value:"work"},{label:d("Other","bit-integrations"),value:"other"}],u=[{label:d("Home","bit-integrations"),value:"home"},{label:d("Work","bit-integrations"),value:"work"},{label:d("Mobile","bit-integrations"),value:"mobile"},{label:d("Fax","bit-integrations"),value:"fax"},{label:d("Other","bit-integrations"),value:"other"}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"pos-rel d-flx w-8",children:[e.jsx(k,{checked:(s==null?void 0:s.address_type)||!1,onChange:p=>g(p,"address_type"),className:"wdt-200 mt-4 mr-2",value:"address",title:d("Add Address Field","bit-integrations"),subTitle:d("Add Address Field","bit-integrations")}),e.jsx(k,{checked:(s==null?void 0:s.phone_type)||!1,onChange:p=>g(p,"phone_type"),className:"wdt-200 mt-4 mr-2",value:"phone",title:d("Add Phone Field","bit-integrations"),subTitle:d("Add Phone Field","bit-integrations")}),e.jsx(k,{checked:s.tag_ids.length||!1,onChange:p=>g(p,"tag_ids"),className:"wdt-200 mt-4 mr-2",value:"tag_ids",title:d("Tags","bit-integrations"),subTitle:d("Add Tags","bit-integrations")}),e.jsx(k,{checked:(s==null?void 0:s.list_ids.length)||!1,onChange:p=>g(p,"list_ids"),className:"wdt-200 mt-4 mr-2",value:"list_ids",title:d("Lists","bit-integrations"),subTitle:d("Add Lists","bit-integrations")})]}),e.jsxs(A,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:d("Ok","bit-integrations"),show:_.show==="address_type",close:c,action:c,title:d("Address Type","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),e.jsx("div",{className:"flx flx-between mt-2",children:e.jsx(n,{className:"msl-wrp-options",defaultValue:s==null?void 0:s.address_type,options:w.map(p=>({label:p.label,value:p.value})),onChange:p=>F(p,"address_type"),customValue:!0,singleSelect:!0})})]}),e.jsxs(A,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:d("Ok","bit-integrations"),show:_.show==="phone_type",close:c,action:c,title:d("Phone Type","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),e.jsx("div",{className:"flx flx-between mt-2",children:e.jsx(n,{className:"msl-wrp-options",defaultValue:s==null?void 0:s.phone_type,options:u.map(p=>({label:p.label,value:p.value})),onChange:p=>F(p,"phone_type"),customValue:!0,singleSelect:!0})})]}),e.jsxs(A,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:d("Ok","bit-integrations"),show:_.show==="list_ids",close:c,action:c,title:d("Lists","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),h.list?e.jsx(M,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsx(n,{className:"msl-wrp-options",defaultValue:s==null?void 0:s.list_ids,options:(v=s==null?void 0:s.lists)==null?void 0:v.map(p=>({label:p.listName,value:p.listId})),onChange:p=>F(p,"list_ids"),customValue:!0}),e.jsx("button",{onClick:()=>q(s,r,h,b),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${d("Refresh Lists","bit-integrations")}'`},type:"button",disabled:h.list,children:"↻"})]})]})," ",e.jsxs(A,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:d("Ok","bit-integrations"),show:_.show==="tag_ids",close:c,action:c,title:d("Tags","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),h.tag?e.jsx(M,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsx(n,{className:"msl-wrp-options",defaultValue:s==null?void 0:s.tag_ids,options:(N=s==null?void 0:s.tags)==null?void 0:N.map(p=>({label:p.tagName,value:p.tagId})),onChange:p=>F(p,"tag_ids"),customValue:!0}),e.jsx("button",{onClick:()=>P(s,r,h,b),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${d("Refresh Tags","bit-integrations")}'`},type:"button",disabled:h.tag,children:"↻"})]})]})]})}function he({id:i,formFields:s,handleInput:r,constantContactConf:l,setConstantContactConf:a,isLoading:h,setIsLoading:b,setSnackbar:_}){var c,F,w,u;const m=[{tag:"street",name:d("Street","bit-integrations"),required:!1},{tag:"city",name:d("City","bit-integrations"),required:!1},{tag:"state",name:d("State","bit-integrations"),required:!1},{tag:"postal_code",name:d("Postal Code","bit-integrations"),required:!1},{tag:"country",name:d("Country","bit-integrations"),required:!1}],g=[{tag:"phone_number",name:d("Phone Number","bit-integrations"),required:!0}];return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:d("Source:","bit-integrations")}),e.jsxs("select",{onChange:r,name:"source_type",value:l.source_type,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:d("Select Source","bit-integrations")}),e.jsx("option",{value:"Contact",children:d("Contact","bit-integrations")}),e.jsx("option",{value:"Account",children:d("Account","bit-integrations")})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),(l==null?void 0:l.source_type)!==""&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("ConstantContact Fields","bit-integrations")})})]}),l==null?void 0:l.field_map.map((v,N)=>e.jsx(le,{i:N,field:v,constantContactConf:l,formFields:s,setConstantContactConf:a,setSnackbar:_},`rp-m-${N+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>R(l.field_map.length,l,a,!1),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),e.jsx("br",{}),e.jsx("br",{}),(l==null?void 0:l.source_type)!==""&&((c=l.actions)==null?void 0:c.address)&&l.address_type!==""&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:d("Address Field Map","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Form Address Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Constant Contact Address Fields","bit-integrations")})})]}),(F=l==null?void 0:l.address_field)==null?void 0:F.map((v,N)=>e.jsx(C,{i:N,field:v,constantContactConf:l,formFields:s,setConstantContactConf:a,addressField:m},`sheet-m-${N+9}`)),(l==null?void 0:l.address_field.length)<5&&e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>I(l.address_field.length,l,a),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),e.jsx("br",{}),e.jsx("br",{})," ",(l==null?void 0:l.source_type)!==""&&((w=l.actions)==null?void 0:w.phone)&&l.phone_type!==""&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:d("Phone Field Map","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Form Phone Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Constant Contact Phone Fields","bit-integrations")})})]}),(u=l==null?void 0:l.phone_field)==null?void 0:u.map((v,N)=>e.jsx(ee,{i:N,field:v,constantContactConf:l,formFields:s,setConstantContactConf:a,phoneField:g},`sheet-m-${N+9}`))]}),e.jsx("br",{}),e.jsx("br",{}),(l==null?void 0:l.source_type)!==""&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:d("Utilities","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(se,{id:i,constantContactConf:l,setConstantContactConf:a,address:m,phone:g,isLoading:h,setIsLoading:b})]})]})}export{he as C};
