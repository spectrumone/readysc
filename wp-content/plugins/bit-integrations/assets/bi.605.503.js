var P=Object.defineProperty;var D=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var v=(a,t,s)=>t in a?P(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,S=(a,t)=>{for(var s in t||(t={}))V.call(t,s)&&v(a,s,t[s]);if(D)for(var s of D(t))I.call(t,s)&&v(a,s,t[s]);return a};import{u as L,r as c,j as n}from"./main-165.js";import{d as R,_ as r,I as A,F as C,c as o}from"./bi.312.95.js";import{S as w}from"./bi.354.971.js";import{T as i,c as f}from"./bi.913.968.js";import{D as M}from"./bi.998.967.js";import F from"./bi.989.357.js";import"./bi.953.732.js";import"./bi.422.733.js";import"./bi.40.785.js";function J({formFields:a,setFlow:t,flow:s,allIntegURL:u}){const g=L(),[_,E]=c.useState(!1),[T,k]=c.useState({auth:!1,euFields:!1,vendors:!1}),[d,b]=c.useState(1),[j,p]=c.useState({show:!1}),[e,m]=c.useState({name:"Dokan",type:"Dokan",field_map:[],staticFields:[],selectedTask:"",vendors:[],selectedVendor:"",actions:{},deleteVendorFieldMap:!1,selectedPaymentMethod:""}),N=()=>{E(!0),C(s,t,u,e,g,"","",E).then(l=>{var x;l.success?(o.success((x=l.data)==null?void 0:x.msg),g(u)):o.error(l.data||l)})},y=h=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!e.selectedTask){o.error(r("Please select a task!","bit-integrations"));return}if((e.selectedTask===i.UPDATE_VENDOR||e.selectedTask===i.WITHDRAW_REQUEST)&&!e.selectedVendor){o.error(r("Please select a vendor!","bit-integrations"));return}if(e.selectedTask!==i.DELETE_VENDOR&&!f(e)){o.error(r("Please map mandatory fields!","bit-integrations"));return}if(e.selectedTask===i.DELETE_VENDOR&&!e.selectedVendor&&!f(e)){o.error(r("Please select a topic or map fields!","bit-integrations"));return}if(e.selectedTask===i.WITHDRAW_REQUEST&&!e.selectedPaymentMethod){o.error(r("Please select a payment method!","bit-integrations"));return}e.field_map.length>0&&b(h)};return n.jsxs("div",{children:[n.jsx(R,{snack:j,setSnackbar:p}),n.jsx("div",{className:"txt-center mt-2",children:n.jsx(w,{step:3,active:d})}),n.jsx(F,{dokanConf:e,setDokanConf:m,step:d,setStep:b,loading:T,setLoading:k,setSnackbar:p}),n.jsxs("div",{className:"btcd-stp-page",style:S({},d===2&&{width:900,height:"auto",overflow:"visible"}),children:[n.jsx(M,{formFields:a,dokanConf:e,setDokanConf:m,loading:T,setLoading:k,setSnackbar:p}),n.jsxs("button",{onClick:()=>y(3),disabled:(e==null?void 0:e.selectedTask)!==i.DELETE_VENDOR&&!f(e),className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[r("Next","bit-integrations")," Â ",n.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),n.jsx(A,{step:d,saveConfig:()=>N(),isLoading:_,dataConf:e,setDataConf:m,formFields:a})]})}export{J as default};
