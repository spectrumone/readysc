var w=Object.defineProperty;var h=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var q=(i,s,a)=>s in i?w(i,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[s]=a,x=(i,s)=>{for(var a in s||(s={}))C.call(s,a)&&q(i,a,s[a]);if(h)for(var a of h(s))D.call(s,a)&&q(i,a,s[a]);return i};import{u as E,r,j as n}from"./main-165.js";import{_ as e,d as P,I as A,F as T,c as m}from"./bi.312.95.js";import{S as B}from"./bi.354.971.js";import M from"./bi.300.332.js";import{s as z,h as G,c as _}from"./bi.582.920.js";import{L as H}from"./bi.489.921.js";import"./bi.40.785.js";function X({formFields:i,setFlow:s,flow:a,allIntegURL:f}){const g=E(),[u,o]=r.useState(!1),[S,v]=r.useState({}),[l,y]=r.useState(1),[N,p]=r.useState({show:!1}),j=[{key:"name",label:"Name",required:!0}],L=[{key:"first_name",label:e("First Name","bit-integrations"),required:!1},{key:"last_name",label:e("Last Name","bit-integrations"),required:!1},{key:"email",label:e("Email","bit-integrations"),required:!0},{key:"mobile_phone",label:e("Mobile Phone","bit-integrations"),required:!1},{key:"home_phone",label:e("Home Phone","bit-integrations"),required:!1},{key:"office_phone",label:e("Office Phone","bit-integrations"),required:!1},{key:"fax",label:e("Fax","bit-integrations"),required:!1},{key:"company",label:e("Company","bit-integrations"),required:!1},{key:"birthday",label:e("Birthday","bit-integrations"),required:!1},{key:"anniversary",label:e("Anniversary","bit-integrations"),required:!1},{key:"spouse_name",label:e("Spouse Name","bit-integrations"),required:!1},{key:"spouse_email",label:e("Spouse Email","bit-integrations"),required:!1},{key:"spouse_phone",label:e("Spouse Phone","bit-integrations"),required:!1},{key:"spouse_birthday",label:e("Spouse Birthday","bit-integrations"),required:!1},{key:"type",label:e("Address type","bit-integrations"),required:!1},{key:"street_address_1",label:e("Street Address 1","bit-integrations"),required:!1},{key:"street_address_2",label:e("Street Address 2","bit-integrations"),required:!1},{key:"zip",label:e("Zip","bit-integrations"),required:!1},{key:"city",label:e("City","bit-integrations"),required:!1},{key:"state",label:e("State","bit-integrations"),required:!1}],[t,d]=r.useState({name:"LionDesk",type:"LionDesk",clientId:"",clientSecret:"",field_map:[{formField:"",lionDeskFormField:""}],actionName:"",actionId:"",campaignFields:j,contactFields:L,actions:{}});r.useEffect(()=>{window.opener&&z("lionDesk")},[]);const I=()=>{o(!0),T(a,s,f,t,g,"","",o).then(b=>{var k;b.success?(m.success((k=b.data)==null?void 0:k.msg),g(f)):m.error(b.data||b)})},F=c=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!_(t)){m.error(e("Please map mandatory fields","bit-integrations"));return}t.field_map.length>0&&y(c)};return n.jsxs("div",{children:[n.jsx(P,{snack:N,setSnackbar:p}),n.jsx("div",{className:"txt-center mt-2",children:n.jsx(B,{step:3,active:l})}),n.jsx(M,{lionDeskConf:t,setLionDeskConf:d,step:l,setStep:y,setSnackbar:p,isLoading:u,setIsLoading:o}),n.jsxs("div",{className:"btcd-stp-page",style:x({},l===2&&{width:900,height:"auto",overflow:"visible"}),children:[n.jsx(H,{formFields:i,handleInput:c=>G(c,t,d),lionDeskConf:t,setLionDeskConf:d,loading:S,setLoading:v,isLoading:u,setIsLoading:o,setSnackbar:p}),(t==null?void 0:t.actionName)&&n.jsxs("button",{onClick:()=>F(3),disabled:!_(t),className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[e("Next","bit-integrations")," Â ",n.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(t==null?void 0:t.actionName)&&n.jsx(A,{step:l,saveConfig:()=>I(),isLoading:u,dataConf:t,setDataConf:d,formFields:i})]})}export{X as default};
