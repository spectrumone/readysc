var le=Object.defineProperty;var K=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var Q=(t,r,c)=>r in t?le(t,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[r]=c,k=(t,r)=>{for(var c in r||(r={}))ae.call(r,c)&&Q(t,c,r[c]);if(K)for(var c of K(r))ie.call(r,c)&&Q(t,c,r[c]);return t};import{r as O,j as e,L as Z,i as ee,e as te}from"./main-165.js";import{T as ne,a as oe,b as ce,c as re}from"./bi.435.737.js";import{m as M,_ as a,e as $,n as R,j as de,q as X,k as me,l as he,o as A,r as ue,T as pe,g as se,h as xe}from"./bi.312.95.js";import{r as je,a as be,b as ve,g as Ne,d as ge,e as fe}from"./bi.477.735.js";import{T as we}from"./bi.953.732.js";function Fe({tab:t,formID:r,formFields:c,biginConf:s,setBiginConf:d,setSnackbar:m}){var i,S,B,V,L,U,z,P,q,D,E,I,W,G,H,C,J;const[n,o]=O.useState(!1),[x,h]=O.useState(!1),[f,w]=O.useState({show:!1}),[N,y]=O.useState(!1),j=(l,p,u)=>{const v=k({},s);t===0?u!==void 0?u?v.actions[p]=l:delete v.actions[p]:l?v.actions[p]=l:delete v.actions[p]:u!==void 0?u?v.relatedlists[t-1].actions[p]=l:delete v.relatedlists[t-1].actions[p]:l?v.relatedlists[t-1].actions[p]=l:delete v.relatedlists[t-1].actions[p],d(k({},v))},b=t===0?s.module:s.relatedlists[t-1].module,g=()=>{var p,u,v;const l=[{title:a("Tags","bit-integrations"),type:"group",childs:[]},{title:a("Form Fields","bit-integrations"),type:"group",childs:[]}];return(v=(u=(p=s==null?void 0:s.default)==null?void 0:p.moduleData)==null?void 0:u[b])!=null&&v.tags&&(l[0].childs=Object.values(s.default.moduleData[b].tags).map(_=>({label:_.tagName,value:_.tagId}))),l[1].childs=c.map(_=>({label:_.name,value:`\${${_.key}}`})),l},F=()=>{w({show:!1})},T=(l,p)=>{const u=k({},s);u.actions.note||(u.actions.note={}),l==="field"?(u.actions.note.content||(u.actions.note.content=""),u.actions.note.content+=p):p?u.actions.note[l]=p:delete u.actions.note[l],d(k({},u))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flx flx-wrp",children:[((S=(i=s==null?void 0:s.relatedlists)==null?void 0:i[t-1])==null?void 0:S.module)!=="Notes"&&e.jsxs(e.Fragment,{children:[e.jsx(M,{onChange:l=>j(!0,"workflow",l.target.checked),checked:t===0?"workflow"in s.actions:"workflow"in((V=(B=s.relatedlists)==null?void 0:B[t-1])==null?void 0:V.actions),className:"wdt-200 mt-4 mr-2",value:"Workflow",title:a("Workflow","bit-integrations"),subTitle:a("Trigger workflows in Zoho Bigin.","bit-integrations")}),e.jsx(M,{onChange:l=>j(!0,"approval",l.target.checked),checked:t===0?"approval"in s.actions:"approval"in((U=(L=s.relatedlists)==null?void 0:L[t-1])==null?void 0:U.actions),className:"wdt-200 mt-4 mr-2",value:"Approval",title:a("Approval","bit-integrations"),subTitle:a("Send entries to approval list in Zoho Bigin.","bit-integrations")}),t===0&&!["Calls","Events","Tasks"].includes(s.module)&&e.jsx(M,{onChange:()=>h(!0),checked:"note"in s.actions&&("title"in((z=s.actions)==null?void 0:z.note)||"content"in((P=s.actions)==null?void 0:P.note)),className:"wdt-200 mt-4 mr-2",value:"notes",title:a("Add a Note","bit-integrations"),subTitle:a("Add a note from bitform to pushed to Zoho Bigin.","bit-integrations")})]}),["Contacts","Accounts","Products"].includes(b)&&e.jsx(M,{onChange:()=>w({show:"photo"}),checked:t===0?"photo"in s.actions:"photo"in s.relatedlists[t-1].actions,className:"wdt-200 mt-4 mr-2",value:"Attachment",title:a("Upload Photo","bit-integrations"),subTitle:`Add a photo to ${b} in Zoho Bigin.`}),e.jsx(M,{onChange:()=>w({show:"attachments"}),checked:t===0?"attachments"in s.actions:"attachments"in s.relatedlists[t-1].actions,className:"wdt-200 mt-4 mr-2",value:"Attachment",title:a("Attachment","bit-integrations"),subTitle:a("Add attachments from BitForm to Zoho Bigin.","bit-integrations")})]}),e.jsxs($,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:"Ok",show:f.show==="attachments",close:F,action:F,title:a("Select Attachment","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2"}),e.jsx("div",{className:"mt-2",children:a("Select File Upload Fields","bit-integrations")}),e.jsx(R,{defaultValue:t===0?s.actions.attachments:s.relatedlists[t-1].actions.attachments,className:"mt-2 w-9",onChange:l=>j(l,"attachments"),options:c.filter(l=>l.type==="file").map(l=>({label:l.label,value:l.name}))})]}),e.jsxs($,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:"Ok",show:f.show==="photo",close:F,action:F,title:a("Upload Photo","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2"}),e.jsx("div",{className:"mt-2",children:a("Select File Upload Fields","bit-integrations")}),e.jsx(R,{defaultValue:t===0?s.actions.photo:s.relatedlists[t-1].actions.photo,className:"mt-2 w-9",onChange:l=>j(l,"photo"),options:c.filter(l=>l.type==="file").map(l=>({label:l.label,value:l.name})),singleSelect:!0})]}),e.jsxs($,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:"Ok",show:n,close:()=>o(!1),action:()=>o(!1),title:a("Record Owner","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),N?e.jsx(Z,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsx(R,{className:"msl-wrp-options",defaultValue:t===0?s.actions.owner:s.relatedlists[t-1].actions.owner,options:((q=s.default)==null?void 0:q.users)&&Object.values(s.default.users).map(l=>({label:l.userName,value:l.userId})),onChange:l=>j(l,"owner"),customValue:!0}),e.jsx("button",{onClick:()=>je(r,s,d,y,m),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Users"'},type:"button",disabled:N,children:"↻"})]})]}),e.jsxs($,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:"Ok",show:f.show==="tag_rec",close:F,action:F,title:a("Tags","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),e.jsx("small",{children:`Add a tag to ${b} pushed to Zoho Bigin`}),e.jsx("div",{className:"mt-2",children:a("Tag Name","bit-integrations")}),N?e.jsx(Z,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsx(R,{className:"msl-wrp-options",defaultValue:t===0?s.actions.tag_rec:s.relatedlists[t-1].actions.tag_rec,options:g(),onChange:l=>j(l,"tag_rec")}),e.jsx("button",{onClick:()=>be(t,r,s,d,y,m),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh CRM Tags"'},type:"button",disabled:N,children:"↻"})]})]}),t===0&&e.jsxs($,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:"Ok",show:x,close:()=>h(!1),action:()=>h(!1),title:a("Notes","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),N?e.jsx(Z,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-2 mb-1",children:a("Note Title","bit-integrations")}),e.jsx("input",{type:"text",className:"btcd-paper-inp",placeholder:a("Note Title","bit-integrations"),onChange:l=>T("title",l.target.value),value:t===0?((E=(D=s.actions)==null?void 0:D.note)==null?void 0:E.title)||"":((W=(I=s.relatedlists[t-1].actions)==null?void 0:I.note)==null?void 0:W.title)||""}),e.jsx("div",{className:"mt-2 mb-1",children:a("Note Content","bit-integrations")}),e.jsxs("select",{className:"btcd-paper-inp w-5",onChange:l=>T("field",l.target.value),children:[e.jsx("option",{value:"",children:a("Field","bit-integrations")}),c.map(l=>l.type!=="file"&&e.jsx("option",{value:`\${${l.name}}`,children:l.label},`ff-zhcrm-${l.name}`))]}),e.jsx("textarea",{rows:"5",className:"btcd-paper-inp mt-2",onChange:l=>T("content",l.target.value),value:t===0?((H=(G=s.actions)==null?void 0:G.note)==null?void 0:H.content)||"":((J=(C=s.relatedlists[t-1].actions)==null?void 0:C.note)==null?void 0:J.content)||""})]})]})]})}function Y({i:t,uploadFields:r,formFields:c,field:s,biginConf:d,setBiginConf:m,tab:n}){var w,N,y,j,b,g,F,T;const o=n===0?d.module:(N=(w=d.relatedlists)==null?void 0:w[n-1])==null?void 0:N.module,x=s.zohoFormField===""||((b=(j=(y=d.default.moduleData)==null?void 0:y[o])==null?void 0:j.required)==null?void 0:b.indexOf(s.zohoFormField))===-1,h=ee(de),{isPro:f}=h;return e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:s.formField||"",onChange:i=>X(i,t,d,m,r,n),children:[e.jsx("option",{value:"",children:a("Select Field","bit-integrations")}),e.jsx("optgroup",{label:a("Form Fields","bit-integrations"),children:r?c.map(i=>i.type==="file"&&e.jsx("option",{value:i.name,children:i.label},`ff-zhcrm-${i.name}`)):c.map(i=>i.type!=="file"&&e.jsx("option",{value:i.name,children:i.label},`ff-zhcrm-${i.name}`))}),!r&&e.jsx("option",{value:"custom",children:a("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`${a("General Smart Codes","bit-integrations")} ${f?"":`(${a("Pro","bit-integrations")})`}`,children:f&&((g=me)==null?void 0:g.map(i=>e.jsx("option",{value:i.name,children:i.label},`ff-rm-${i.name}`)))})]}),s.formField==="custom"&&e.jsx(we,{onChange:i=>he(i,t,d,m),label:a("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:s.customValue,placeholder:a("Custom Value","bit-integrations"),formFields:c}),e.jsxs("select",{className:"btcd-paper-inp",disabled:!x,name:"zohoFormField",value:s.zohoFormField||"",onChange:i=>X(i,t,d,m,r,n),children:[e.jsx("option",{value:"",children:a("Select Field","bit-integrations")}),((T=(F=d.default.moduleData)==null?void 0:F[o])==null?void 0:T.fields)&&Object.values(d.default.moduleData[o].fields).map(i=>x?!i.required&&e.jsx("option",{value:i.api_name,children:i.display_label},i.api_name):e.jsx("option",{value:i.api_name,children:i.display_label},i.api_name))]})]}),x&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>A(t,d,m,r,n),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>ue(t,d,m,r,n),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx(pe,{})})]})]})}function ye({tab:t,settab:r,formID:c,isLoading:s,setIsLoading:d,setSnackbar:m}){var h,f,w,N,y,j;const[n,o]=te(se),x=ee(xe);return O.useEffect(()=>{ve(0,r)},[]),e.jsxs(e.Fragment,{children:[s&&e.jsx(Z,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),((w=(f=(h=n.default)==null?void 0:h.moduleData)==null?void 0:f[n.module])==null?void 0:w.fields)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4",children:[e.jsx("b",{className:"wdt-100",children:a("Map Fields","bit-integrations")}),e.jsx("button",{onClick:()=>Ne(t,c,n,o,d,m),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${a("Refresh Bigin Fields","bit-integrations")}'`},type:"button",disabled:s,children:"↻"})]}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Zoho Fields","bit-integrations")})})]}),n.field_map.map((b,g)=>e.jsx(Y,{i:g,field:b,biginConf:n,formFields:x,setBiginConf:o,tab:t,setSnackbar:m},`bigin-m-${g+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>A(n.field_map.length,n,o,!1,t),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),Object.keys((j=(y=(N=n.default)==null?void 0:N.moduleData)==null?void 0:y[n.module])==null?void 0:j.fileUploadFields).length!==0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:a("Map Attachments","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Zoho Fields","bit-integrations")})})]}),n.upload_field_map.map((b,g)=>e.jsx(Y,{uploadFields:1,i:g,field:b,biginConf:n,formFields:x,setBiginConf:o,tab:t,setSnackbar:m},`crm-m-${g+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>A(n.upload_field_map.length,n,o,!0,t),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{})]}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:a("Utilities","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(Fe,{tab:t,formID:c,formFields:x,biginConf:n,setBiginConf:o,setSnackbar:m})]})]})}function Re({tab:t,settab:r,formID:c,handleInput:s,isLoading:d,setIsLoading:m,setSnackbar:n}){const[o,x]=te(se);return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:a("Module:","bit-integrations")}),e.jsxs("select",{onChange:s,name:"module",value:o.module,className:"btcd-paper-inp w-5",disabled:t===1,children:[e.jsx("option",{value:"",children:a("Select Module","bit-integrations")}),o.default&&o.default.modules&&Object.values(o.default.modules).map(h=>e.jsx("option",{value:h.api_name,children:h.plural_label},h.api_name))]}),t===0&&e.jsx("button",{onClick:()=>ge(c,o,x,m,n),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${a("Refresh Bigin Modules","bit-integrations")}'`},type:"button",disabled:d,children:"↻"}),(o==null?void 0:o.module)==="Deals"&&!d&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:a("Select Layout:","bit-integrations")}),e.jsxs("select",{onChange:s,name:"pLayout",value:o.pLayout,className:"btcd-paper-inp w-5",disabled:t===1,children:[e.jsx("option",{value:"",children:a("Select Layout","bit-integrations")}),o.default&&o.default.pLayouts&&Object.values(o.default.pLayouts).map(h=>e.jsx("option",{value:h.name,children:h.display_label},h.name))]}),t===0&&e.jsx("button",{onClick:()=>fe(c,o,x,m,n),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${a("Refresh pipelines Layouts","bit-integrations")}'`},type:"button",disabled:d,children:"↻"})]}),e.jsx("br",{}),e.jsxs(ne,{selectedTabClassName:"s-t-l-active",children:[e.jsx(oe,{className:"flx mt-2 mb-0",children:e.jsx(ce,{className:"btcd-s-tab-link mb-0",children:a("New Record","bit-integrations")})}),e.jsx("div",{className:"btcd-hr"}),e.jsx(re,{children:e.jsx(ye,{tab:t,settab:r,formID:c,isLoading:d,setIsLoading:m,setSnackbar:n})})]})]})}export{Re as Z};
