var I=Object.defineProperty;var j=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var k=(o,s,i)=>s in o?I(o,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[s]=i,v=(o,s)=>{for(var i in s||(s={}))w.call(s,i)&&k(o,i,s[i]);if(j)for(var i of j(s))A.call(s,i)&&k(o,i,s[i]);return o};import{r as u,j as t,u as T,l as z}from"./main-165.js";import{_ as n,L as M,p as _,b as E,z as B,d as D,I as F,s as P}from"./bi.312.95.js";import{S as H}from"./bi.354.971.js";import{L as U,h as q,c as G}from"./bi.619.893.js";import{B as J}from"./bi.430.769.js";import{T as y,t as K}from"./bi.40.785.js";function O({formID:o,lifterLmsConf:s,setLifterLmsConf:i,step:d,setStep:g,isLoading:h,setIsLoading:p,setSnackbar:x}){const[r,b]=u.useState(!1),[m,f]=u.useState(!1),{lifterLms:a}=K,c=()=>{p("auth"),E({},"lifterLms_authorize").then(e=>{e!=null&&e.success&&(b(!0),x({show:!0,msg:n("Connected with LifterLms Successfully","bit-integrations")})),p(!1),f(!0)})},L=e=>{const l=B(s);l[e.target.name]=e.target.value,i(l)};return t.jsxs("div",{className:"btcd-stp-page",style:{width:d===1&&900,height:d===1&&"auto"},children:[(a==null?void 0:a.youTubeLink)&&t.jsx(y,{title:"LifterLMS",youTubeLink:a==null?void 0:a.youTubeLink}),(a==null?void 0:a.docLink)&&t.jsx(y,{title:"LifterLMS",docLink:a==null?void 0:a.docLink}),t.jsx("div",{className:"mt-3",children:t.jsx("b",{children:n("Integration Name:","bit-integrations")})}),t.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:L,name:"name",value:s.name,type:"text",placeholder:n("Integration Name...","bit-integrations")}),h==="auth"&&t.jsxs("div",{className:"flx mt-5",children:[t.jsx(M,{size:25,clr:"#022217",className:"mr-2"}),"Checking if LifterLms is active!!!"]}),m&&!r&&!h&&t.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[t.jsx("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),_(n("%s plugin must be activated to integrate with Bit Integrations","bit-integrations"),"LifterLms")]}),!r&&t.jsx("button",{onClick:c,className:"btn btcd-btn-lg purple sh-sm flx mt-5",type:"button",children:n("Connect","bit-integrations")}),r&&t.jsxs("button",{onClick:()=>g(2),className:"btn btcd-btn-lg purple sh-sm flx mt-5",type:"button",disabled:!r,children:[n("Next","bit-integrations"),t.jsx(J,{className:"ml-1 rev-icn"})]})]})}function $({formFields:o,setFlow:s,flow:i,allIntegURL:d,isInfo:g,edit:h}){const p=T(),{formID:x}=z(),[r,b]=u.useState(!1),[m,f]=u.useState(1),[a,c]=u.useState({show:!1}),L=[{key:"1",label:n("Lesson complete for the user","bit-integrations")},{key:"2",label:n("Section complete for the user","bit-integrations")},{key:"3",label:n("Enroll user in a Course","bit-integrations")},{key:"4",label:n("Enroll user in a membership","bit-integrations")},{key:"5",label:n("Course complete for the user","bit-integrations")},{key:"6",label:n("Unenroll user from a course","bit-integrations")},{key:"7",label:n("Unenroll user from a membership","bit-integrations")}],[e,l]=u.useState({name:"LifterLms",type:"LifterLms",mainAction:"",field_map:[{formField:"",lifterLmsFormField:""}],allActions:L,actions:{}}),N=()=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),e.mainAction==="11"&&!G(e)){c({show:!0,msg:n("Please map fields to continue.","bit-integrations")});return}e.mainAction!==""&&f(3)};function S(){switch(e.mainAction){case"1":return e.lessonId===void 0;case"2":return e.sectionId===void 0;case"3":case"5":case"6":return e.courseId===void 0;case"4":case"7":return e.membershipId===void 0;default:return!1}}return t.jsxs("div",{children:[t.jsx(D,{snack:a,setSnackbar:c}),t.jsx("div",{className:"txt-center mt-2",children:t.jsx(H,{step:3,active:m})}),t.jsx(O,{formID:x,lifterLmsConf:e,setLifterLmsConf:l,step:m,setStep:f,isLoading:r,setIsLoading:b,setSnackbar:c}),t.jsxs("div",{className:"btcd-stp-page",style:v({},m===2&&{width:900,height:"auto",overflow:"visible"}),children:[t.jsx(U,{formFields:o,handleInput:C=>q(C,e,l),lifterLmsConf:e,setLifterLmsConf:l,isLoading:r,setIsLoading:b,setSnackbar:c,allIntegURL:d,isInfo:g,edit:h}),t.jsxs("button",{onClick:()=>N(),disabled:!e.mainAction||r||S(),className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[n("Next","bit-integrations")," ",t.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),t.jsx(F,{step:m,saveConfig:()=>P({flow:i,setFlow:s,allIntegURL:d,navigate:p,conf:e,setIsLoading:b,setSnackbar:c}),isLoading:r,dataConf:e,setDataConf:l,formFields:o})]})}export{$ as default};
